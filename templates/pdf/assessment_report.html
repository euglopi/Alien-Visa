<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>O-1A Visa Assessment Report</title>
    <link rel="stylesheet" href="pdf_styles.css">
</head>
<body>
    <header class="report-header">
        <div class="logo-section">
            <h1>O-1A Visa Assessment Report</h1>
            <p class="subtitle">Extraordinary Ability Visa Criteria Analysis</p>
        </div>
        <div class="meta-section">
            <p><strong>Generated:</strong> {{ generated_at }}</p>
            <p><strong>Resume:</strong> {{ parsed_resume.filename }}</p>
        </div>
    </header>

    <section class="summary-section">
        <h2>Executive Summary</h2>
        <div class="summary-box {{ tier|lower|replace(' ', '-') }}">
            <div class="score-display">
                <span class="score-number">{{ score }}</span>
                <span class="score-label">of 8 criteria met</span>
            </div>
            <div class="tier-display">
                <span class="tier-label">Case Strength:</span>
                <span class="tier-value">{{ tier }}</span>
            </div>
        </div>
        <p class="summary-note">
            The O-1A visa requires demonstrating extraordinary ability by meeting at least
            3 of the 8 evidentiary criteria. This assessment analyzes the provided resume
            against USCIS regulatory standards.
        </p>
    </section>

    <section class="criteria-section">
        <h2>Assessment Criteria</h2>

        {% for criterion in assessment.criteria %}
        <div class="criterion-card {{ 'met' if criterion.met else 'not-met' }}">
            <div class="criterion-header">
                <span class="criterion-status">
                    {% if criterion.met %}MET{% else %}NOT MET{% endif %}
                </span>
                <h3>{{ criterion.name }}</h3>
            </div>

            <p class="criterion-description">
                <em>USCIS Standard:</em> {{ criterion.description }}
            </p>

            {% if criterion.evidence %}
            <div class="evidence-box">
                <h4>Evidence Found</h4>
                <p>{{ criterion.evidence }}</p>
            </div>
            {% endif %}

            {% if criterion.reasoning %}
            <div class="reasoning-box">
                <h4>Analysis</h4>
                <p>{{ criterion.reasoning }}</p>
            </div>
            {% endif %}

            {% if criterion.name in challenges %}
            <div class="challenge-transcript">
                <h4>Challenge Conversation</h4>
                <p class="transcript-note">
                    The applicant provided additional information through the challenge feature:
                </p>
                {% for message in challenges[criterion.name].messages %}
                <div class="message {{ message.role }}">
                    <span class="role-label">
                        {% if message.role == 'user' %}Applicant{% else %}AI Advisor{% endif %}:
                    </span>
                    <span class="message-content">{{ message.content }}</span>
                </div>
                {% endfor %}
            </div>
            {% endif %}
        </div>
        {% endfor %}
    </section>

    <section class="resume-section">
        <h2>Parsed Resume Content</h2>
        <p class="section-note">
            The following text was extracted from the uploaded resume.
            The original file is included in this package.
        </p>
        <div class="resume-content">
            <pre>{{ parsed_resume.raw_text }}</pre>
        </div>
    </section>

    <footer class="report-footer">
        <p class="disclaimer">
            <strong>Disclaimer:</strong> This assessment is generated by AI and is intended
            as a preliminary analysis tool. It does not constitute legal advice. Immigration
            attorneys should conduct their own comprehensive review of the applicant's
            qualifications against USCIS evidentiary standards.
        </p>
        <p class="generated-by">
            Generated by Alien - O-1A Visa Readiness Analyzer
        </p>
    </footer>
</body>
</html>
