{% extends "base.html" %}

{% block title %}Upload Resume - O-1 Visa Readiness Analyzer{% endblock %}

{% block content %}
<!-- Loading Overlay -->
<div id="loading-overlay" class="fixed inset-0 bg-gray-900/80 backdrop-blur-sm hidden items-center justify-center z-50">
    <div class="text-center">
        <!-- Spinner -->
        <div class="inline-block w-16 h-16 border-4 border-blue-400 border-t-transparent rounded-full animate-spin mb-6"></div>

        <h2 class="text-2xl font-semibold text-white mb-3">Analyzing your resume</h2>
        <p id="loading-subtitle" class="text-lg text-blue-200 transition-opacity duration-300">
            Uploading document...
        </p>
    </div>
</div>

<div class="min-h-screen flex flex-col items-center justify-center px-4">
    <div class="max-w-xl w-full">
        <div class="text-center mb-8">
            <h1 class="text-4xl font-bold text-gray-900 mb-4">O-1 Visa Readiness Analyzer</h1>
            <p class="text-lg text-gray-600">
                Upload your resume to see how your qualifications align with O-1A visa criteria
                for individuals with extraordinary ability.
            </p>
        </div>

        <div class="bg-white rounded-lg shadow-md p-8">
            <form id="upload-form" action="/upload" method="post" enctype="multipart/form-data">
                <div class="mb-6">
                    <label for="resume" class="block text-sm font-medium text-gray-700 mb-2">
                        Upload your resume
                    </label>
                    <input
                        type="file"
                        id="resume"
                        name="resume"
                        accept=".pdf,.docx"
                        required
                        class="block w-full text-sm text-gray-500
                            file:mr-4 file:py-2 file:px-4
                            file:rounded-md file:border-0
                            file:text-sm file:font-semibold
                            file:bg-blue-50 file:text-blue-700
                            hover:file:bg-blue-100
                            cursor-pointer"
                    >
                    <p class="mt-2 text-sm text-gray-500">PDF or DOCX files accepted</p>
                </div>

                <button
                    type="submit"
                    class="w-full bg-blue-600 text-white py-3 px-4 rounded-md font-medium
                        hover:bg-blue-700 transition-colors"
                >
                    Analyze My Resume
                </button>
            </form>
        </div>

        <p class="text-center text-sm text-gray-500 mt-6">
            Your resume will be analyzed against the 8 O-1A criteria to assess your eligibility.
        </p>
    </div>
</div>

<script>
    const subtitles = [
        "Uploading document...",
        "Parsing resume content...",
        "Extracting work experience...",
        "Analyzing achievements...",
        "Matching against O-1A criteria...",
        "Evaluating extraordinary ability...",
        "Preparing your results..."
    ];

    let currentIndex = 0;
    const subtitleEl = document.getElementById('loading-subtitle');
    const overlay = document.getElementById('loading-overlay');
    const form = document.getElementById('upload-form');

    function cycleSubtitle() {
        subtitleEl.style.opacity = '0';
        setTimeout(() => {
            currentIndex = (currentIndex + 1) % subtitles.length;
            subtitleEl.textContent = subtitles[currentIndex];
            subtitleEl.style.opacity = '1';
        }, 300);
    }

    form.addEventListener('submit', function() {
        overlay.classList.remove('hidden');
        overlay.classList.add('flex');
        setInterval(cycleSubtitle, 2000);
    });
</script>
{% endblock %}
